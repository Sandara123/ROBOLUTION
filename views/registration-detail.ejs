<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Registration Details | Robolution Admin</title>
  <link rel="stylesheet" href="/css/style.css">
  <link rel="stylesheet" href="/css/responsive.css">
  <script src="/js/script.js" defer></script>
  <script src="/js/mobile.js" defer></script>
  <style>
    /* Set background to white */
    body, main {
      background-color: #ffffff;
      background-image: none;
    }
    
    .detail-container {
      max-width: 900px;
      margin: 0 auto;
      padding: 120px 20px 40px;
    }
    
    .detail-card {
      background-color: white;
      border-radius: 8px;
      box-shadow: 0 2px 15px rgba(0, 0, 0, 0.1);
      padding: 30px;
      margin-bottom: 30px;
    }
    
    .detail-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
      border-bottom: 2px solid #00008b;
      padding-bottom: 15px;
    }
    
    .detail-title {
      font-size: 1.8rem;
      color: #00008b;
      margin: 0;
    }
    
    .detail-section {
      margin-bottom: 25px;
    }
    
    .detail-section-title {
      font-size: 1.3rem;
      color: #00008b;
      margin-bottom: 15px;
      border-bottom: 1px solid #e0e0e0;
      padding-bottom: 8px;
    }
    
    .detail-row {
      display: flex;
      margin-bottom: 15px;
      flex-wrap: wrap;
    }
    
    .detail-label {
      flex: 0 0 200px;
      font-weight: bold;
      color: #333;
    }
    
    .detail-value {
      flex: 1;
      min-width: 250px;
    }
    
    .detail-list {
      margin: 0;
      padding-left: 20px;
    }
    
    .action-button {
      padding: 8px 15px;
      background-color: #00008b;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      text-decoration: none;
      display: inline-block;
      margin-right: 10px;
      font-size: 0.9rem;
      transition: background-color 0.2s;
    }
    
    .action-button:hover {
      background-color: #0000cd;
    }
    
    .action-button.edit {
      background-color: #f39c12;
    }
    
    .action-button.edit:hover {
      background-color: #e67e22;
    }
    
    .action-button.delete {
      background-color: #e74c3c;
    }
    
    .action-button.delete:hover {
      background-color: #c0392b;
    }
    
    .payment-status {
      display: inline-block;
      padding: 5px 10px;
      border-radius: 4px;
      font-weight: bold;
      margin-bottom: 10px;
    }
    
    .payment-status.paid {
      background-color: #d4edda;
      color: #155724;
    }
    
    .payment-status.unpaid {
      background-color: #f8d7da;
      color: #721c24;
    }
    
    .verification-status {
      display: inline-block;
      padding: 5px 10px;
      border-radius: 4px;
      font-weight: bold;
      margin-bottom: 10px;
      margin-left: 10px;
    }
    
    .verification-status.verified {
      background-color: #d4edda;
      color: #155724;
    }
    
    .verification-status.unverified {
      background-color: #fff3cd;
      color: #856404;
    }
    
    .payment-image {
      max-width: 100%;
      max-height: 500px;
      border: 1px solid #ddd;
      border-radius: 4px;
      margin-top: 10px;
    }
    
    .action-bar {
      display: flex;
      justify-content: space-between;
      margin-top: 30px;
    }
    
    @media (max-width: 768px) {
      .detail-row {
        flex-direction: column;
      }
      
      .detail-label {
        margin-bottom: 5px;
      }
      
      .action-bar {
        flex-direction: column;
        gap: 10px;
      }
      
      .action-button {
        width: 100%;
        margin-right: 0;
        text-align: center;
      }
    }
  </style>
</head>
<body>
<div class="content-wrapper">

  <header>
    <div class="header-content">
      <img src="/images/LOGO.webp" alt="Robolution Logo" class="logo">
      <nav class="header-nav">
        <a href="/create-post" class="nav-button">Create Post</a>
        <a href="/index" class="nav-button">News</a>
        <a href="/categories" class="nav-button">Categories</a>
        <a href="/manage-categories" class="nav-button">Manage Categories</a>
        <a href="/manage-registrations" class="nav-button">Registrations</a>
        <a href="/logout" class="nav-button">Logout</a>
      </nav>
    </div>
  </header>

  <main>
    <div class="detail-container">
      <div class="detail-card">
        <div class="detail-header">
          <h1 class="detail-title">Registration Details</h1>
          <div>
            <span class="payment-status <%= registration.paymentProofUrl ? 'paid' : 'unpaid' %>">
              <%= registration.paymentProofUrl ? 'PAID' : 'UNPAID' %>
            </span>
            <span class="verification-status <%= registration.verified ? 'verified' : 'unverified' %>">
              <%= registration.verified ? 'VERIFIED' : 'UNVERIFIED' %>
            </span>
          </div>
        </div>
        
        <div class="detail-section">
          <h2 class="detail-section-title">Personal Information</h2>
          
          <div class="detail-row">
            <div class="detail-label">Full Name:</div>
            <div class="detail-value"><%= registration.fullname %></div>
          </div>
          
          <% if (registration.teamMembers) { %>
          <div class="detail-row">
            <div class="detail-label">Team Members:</div>
            <div class="detail-value"><%= registration.teamMembers %></div>
          </div>
          <% } %>
          
          <div class="detail-row">
            <div class="detail-label">Category:</div>
            <div class="detail-value"><%= registration.category %></div>
          </div>
          
          <div class="detail-row">
            <div class="detail-label">School/Organization:</div>
            <div class="detail-value"><%= registration.school || 'N/A' %></div>
          </div>
          
          <div class="detail-row">
            <div class="detail-label">Address:</div>
            <div class="detail-value"><%= registration.address %></div>
          </div>
          
          <div class="detail-row">
            <div class="detail-label">Email:</div>
            <div class="detail-value"><%= registration.email %></div>
          </div>
        </div>
        
        <div class="detail-section">
          <h2 class="detail-section-title">Registration Details</h2>
          
          <div class="detail-row">
            <div class="detail-label">Workshop:</div>
            <div class="detail-value">
              <%= registration.workshop %>
              <% if (registration.other_workshop) { %>
                <div><small>(Custom: <%= registration.other_workshop %>)</small></div>
              <% } %>
            </div>
          </div>
          
          <% if (registration.competition && registration.competition.length > 0) { %>
          <div class="detail-row">
            <div class="detail-label">Competitions:</div>
            <div class="detail-value">
              <ul class="detail-list">
                <% registration.competition.forEach(comp => { %>
                  <li><%= comp %></li>
                <% }); %>
              </ul>
              <% if (registration.other_competition) { %>
                <div><small>(Custom: <%= registration.other_competition %>)</small></div>
              <% } %>
            </div>
          </div>
          <% } %>
          
          <% if (registration.code) { %>
          <div class="detail-row">
            <div class="detail-label">Code:</div>
            <div class="detail-value"><%= registration.code %></div>
          </div>
          <% } %>
          
          <div class="detail-row">
            <div class="detail-label">Registration Date:</div>
            <div class="detail-value">
              <%= new Date(registration.registeredAt).toLocaleString() %>
            </div>
          </div>
        </div>
        
        <div class="detail-section">
          <h2 class="detail-section-title">Payment Information</h2>
          
          <% if (registration.paymentProofUrl) { %>
          <div class="detail-row">
            <div class="detail-label">Payment Status:</div>
            <div class="detail-value">Paid</div>
          </div>
          
          <% if (registration.payment_details) { %>
          <div class="detail-row">
            <div class="detail-label">Payment Details:</div>
            <div class="detail-value"><%= registration.payment_details %></div>
          </div>
          <% } %>
          
          <div class="detail-row">
            <div class="detail-label">Payment Proof:</div>
            <div class="detail-value">
              <a href="<%= registration.paymentProofUrl %>" target="_blank">View Full Image</a>
              <div>
                <img src="<%= registration.paymentProofUrl %>" alt="Payment Proof" class="payment-image">
              </div>
            </div>
          </div>
          <% } else { %>
          <div class="detail-row">
            <div class="detail-label">Payment Status:</div>
            <div class="detail-value">Unpaid</div>
          </div>
          <% } %>
        </div>
        
        <% if (registration.verified) { %>
        <div class="detail-section">
          <h2 class="detail-section-title">Verification Information</h2>
          
          <div class="detail-row">
            <div class="detail-label">Verified By:</div>
            <div class="detail-value"><%= registration.verifiedBy || 'Unknown' %></div>
          </div>
          
          <div class="detail-row">
            <div class="detail-label">Verified At:</div>
            <div class="detail-value">
              <%= registration.verifiedAt ? new Date(registration.verifiedAt).toLocaleString() : 'Unknown' %>
            </div>
          </div>
        </div>
        <% } %>
        
        <div class="action-bar">
          <div>
            <a href="/manage-registrations" class="action-button">Back to List</a>
          </div>
          <div>
            <% if (!registration.verified) { %>
            <a href="/registration/verify/<%= registration._id %>" class="action-button">Verify Registration</a>
            <% } %>
            <a href="/registration/edit/<%= registration._id %>" class="action-button edit">Edit</a>
            <button onclick="confirmDelete('<%= registration._id %>')" class="action-button delete">Delete</button>
          </div>
        </div>
      </div>
    </div>
  </main>

  <footer class="fixed-footer">
    <div class="footer-content">
      <div class="footer-left">
        <p>Powered by Erovoutika</p>
      </div>
      <div class="footer-right">
        <p>Unit 703, PARC HOUSE II, Epifanio de los Santos Ave, Makati, 1212 Metro Manila</p>
        <p><strong>Contact us via:</strong> 0974 423 1557 || erovoutika@gmail.com</p>
        <div class="social-icons">
          <a href="https://www.facebook.com/erovoutika" target="_blank" class="social-icon">f</a>
          <a href="https://www.erovoutika.ph" target="_blank" class="social-icon">↗</a>
          <a href="https://www.linkedin.com/company/erovoutika/" target="_blank" class="social-icon">in</a>
        </div>
      </div>
    </div>
  </footer>
</div>

<script>
  // Function to confirm deletion
  function confirmDelete(id) {
    if (confirm('Are you sure you want to delete this registration? This action cannot be undone.')) {
      window.location.href = `/registration/delete/${id}`;
    }
  }
</script>
</body>
</html> 