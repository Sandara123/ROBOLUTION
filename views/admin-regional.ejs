<!DOCTYPE html><html lang="en"><head>  <meta charset="UTF-8">  <meta name="viewport" content="width=device-width, initial-scale=1.0">  <title><%= region !== 'All' ? region : 'All Regions' %> | Robolution Admin</title>  <link rel="stylesheet" href="/css/style.css">  <link rel="stylesheet" href="/css/responsive.css">  <script src="/js/script.js" defer></script>  <script src="/js/mobile.js" defer></script>  <style>    body, main {      background-color: #ffffff;      background-image: none;    }
    /* Dropdown styles */
    .dropdown {
      position: relative;
      display: inline-block;
    }
    
    .dropdown-btn {
      cursor: pointer;
    }
    
    .dropdown-content {
      display: none;
      position: absolute;
      background-color: #f9f9f9;
      min-width: 220px;
      box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
      z-index: 1;
      border-radius: 4px;
      padding: 8px 0;
    }
    
    .dropdown-content a {
      color: black;
      padding: 12px 16px;
      text-decoration: none;
      display: block;
      text-align: left;
      transition: background-color 0.2s ease;
    }
    
    .dropdown-content a:hover {
      background-color: #f1f1f1;
    }
    
    .dropdown:hover .dropdown-content {
      display: block;
    }
    
    /* Region badge styling */
    .region-badge {
      display: inline-block;
      background-color: #00008b;
      color: white;
      padding: 3px 12px;
      border-radius: 20px;
      font-size: 0.85rem;
      margin-left: 8px;
    }
    
    /* Region title */
    .region-title {
      text-align: center;
      font-size: 2.2rem;
      color: #00008b;
      margin-bottom: 30px;
    }
    
    /* Mobile styles */
    @media (max-width: 768px) {
      .header-content {
        flex-direction: column;
        padding: 10px 5px;
      }
      
      .logo {
        max-width: 150px;
        margin-bottom: 10px;
      }
      
      .header-nav {
        flex-wrap: wrap;
        justify-content: center;
        gap: 5px;
      }
      
      .nav-button {
        padding: 6px 10px;
        font-size: 0.9rem;
        margin: 2px;
      }
      
            .video-section {        height: auto;        margin-top: 60px;      }
      
      .region-title {
        font-size: 1.8rem;
        margin-bottom: 20px;
      }
      
      .posts-header {
        flex-direction: column;
        align-items: flex-start;
        padding: 10px 15px;
      }
      
      .sort-form {
        width: 100%;
        margin-bottom: 10px;
      }
      
      .sort-form label {
        display: block;
        margin-bottom: 5px;
      }
      
      .sort-form select {
        width: 100%;
        padding: 8px;
      }
      
      .year-section {
        margin-bottom: 25px;
      }
      
      .collapsible {
        padding: 12px 15px;
        font-size: 1.3rem;
      }
      
      .post-card {
        width: 100%;
      }
      
      .post-actions {
        flex-direction: column;
        gap: 8px;
      }
      
      .edit-btn, .delete-btn {
        width: 100%;
        text-align: center;
      }
      
      .footer-content {
        flex-direction: column;
        padding: 15px 10px;
        text-align: center;
      }
      
      .footer-left, .footer-right {
        width: 100%;
        text-align: center;
      }
      
      .footer-right {
        margin-top: 15px;
      }
      
      .footer-right p {
        font-size: 0.9rem;
        margin: 5px 0;
      }
      
      .social-icons {
        justify-content: center;
        margin-top: 10px;
      }
    }
    
    @media (max-width: 480px) {
      .nav-button {
        padding: 5px 8px;
        font-size: 0.8rem;
      }
      
      .region-title {
        font-size: 1.5rem;
      }
      
      .collapsible {
        font-size: 1.1rem;
        padding: 10px 12px;
      }
      
            .video-section {        height: auto;        margin-top: 55px;      }
      
      .post-card h3 {
        font-size: 1.2rem;
      }
    }
  </style>
</head>

<body>
<div class="content-wrapper">

  <div class="video-section">
    <video src="/images/Robolution2025.mp4" loop muted autoplay playsinline></video>
  </div>

  <main>
    <h2 class="region-title">
      <%= region === 'All' ? 'All Regions' : region %> Posts
    </h2>

    <div class="posts-header">
      <form method="GET" action="/admin-regional" class="sort-form">
        <input type="hidden" name="region" value="<%= region %>">
        <label for="sort">Sort by:</label>
        <select name="sort" id="sort" onchange="this.form.submit()">
          <option value="desc" <%= sort === 'desc' ? 'selected' : '' %>>Newest to Oldest</option>
          <option value="asc" <%= sort === 'asc' ? 'selected' : '' %>>Oldest to Newest</option>
        </select>
      </form>
    </div>

    <% let years = {}; %>
    <% posts.forEach(post => { %>
      <% const year = new Date(post.createdAt).getFullYear(); %>
      <% if (!years[year]) years[year] = []; %>
      <% years[year].push(post); %>
    <% }); %>

    <% Object.keys(years).sort((a, b) => { %>
      <% return sort === 'asc' ? a - b : b - a; %>
    <% }).forEach(year => { %>
      <div class="year-section">
        <button class="collapsible"><%= year %> <span class="arrow">▼</span></button>
        <div class="content" style="display: none;">
          <% years[year].forEach(post => { %>
            <div class="post-card">
              <img src="<%= post.imageUrl %>" alt="<%= post.title %>" class="post-img">
              <h3><%= post.title %></h3>
              <div class="post-card-content">
                <p><%= post.content %></p>
                <p><strong>Author:</strong> <%= post.author %></p>
                <% if (post.region && post.region !== 'All') { %>
                  <p><strong>Region:</strong> <span class="region-badge"><%= post.region %></span></p>
                <% } %>
                <p class="date-posted">Posted on: <%= new Date(post.createdAt).toLocaleDateString() %></p>
              </div>
              <div class="post-actions">
                <a href="/edit-post/<%= post._id %>" class="edit-btn">Edit</a>
                <form action="/delete-post/<%= post._id %>" method="POST">
                  <button type="submit" class="delete-btn">Delete</button>
                </form>
              </div>
            </div>
          <% }) %>
        </div>
      </div>
    <% }) %>

  </main>
</div>

<a href="#" class="back-to-top" id="backToTop">↑</a>
</body>

</html> 